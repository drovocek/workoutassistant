package ru.soft.data.config.converter;

import com.fasterxml.jackson.core.JsonProcessingException;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;
import ru.soft.common.testdata.snapshot.TestSnapshotStore;

class CustomJsonObjectMapperTest {

    private static final String STATIONS_SCHEMA_JSON =
            "{\"stationsSchema\":{\"stations\":[{\"exerciseSnapshot\":{\"title\":\"Push-up exercise title\",\"description\":\"Push-up exercise description\",\"complexity\":1},\"repetitions\":3,\"weight\":0,\"duration\":100,\"rest\":20,\"order\":1},{\"exerciseSnapshot\":{\"title\":\"Barbell squat exercise title\",\"description\":\"Barbell squat exercise description\",\"complexity\":2},\"repetitions\":3,\"weight\":0,\"duration\":100,\"rest\":20,\"order\":1},{\"exerciseSnapshot\":{\"title\":\"Pull-up exercise title\",\"description\":\"Pull-up exercise description\",\"complexity\":3},\"repetitions\":3,\"weight\":0,\"duration\":100,\"rest\":20,\"order\":1}]}}";
    private static final String ROUNDS_SCHEMA_JSON =
            "{\"roundsSchema\":{\"roundSnapshots\":[{\"stationsSchema\":{\"stations\":[{\"exerciseSnapshot\":{\"title\":\"Push-up exercise title\",\"description\":\"Push-up exercise description\",\"complexity\":1},\"repetitions\":3,\"weight\":0,\"duration\":100,\"rest\":20,\"order\":1},{\"exerciseSnapshot\":{\"title\":\"Barbell squat exercise title\",\"description\":\"Barbell squat exercise description\",\"complexity\":2},\"repetitions\":3,\"weight\":0,\"duration\":100,\"rest\":20,\"order\":1},{\"exerciseSnapshot\":{\"title\":\"Pull-up exercise title\",\"description\":\"Pull-up exercise description\",\"complexity\":3},\"repetitions\":3,\"weight\":0,\"duration\":100,\"rest\":20,\"order\":1}]},\"title\":\"Warm up round title\",\"description\":\"Warm up round description\",\"order\":0},{\"stationsSchema\":{\"stations\":[{\"exerciseSnapshot\":{\"title\":\"Push-up exercise title\",\"description\":\"Push-up exercise description\",\"complexity\":1},\"repetitions\":3,\"weight\":0,\"duration\":100,\"rest\":20,\"order\":1},{\"exerciseSnapshot\":{\"title\":\"Barbell squat exercise title\",\"description\":\"Barbell squat exercise description\",\"complexity\":2},\"repetitions\":3,\"weight\":0,\"duration\":100,\"rest\":20,\"order\":1},{\"exerciseSnapshot\":{\"title\":\"Pull-up exercise title\",\"description\":\"Pull-up exercise description\",\"complexity\":3},\"repetitions\":3,\"weight\":0,\"duration\":100,\"rest\":20,\"order\":1}]},\"title\":\"Strength round title\",\"description\":\"Strength round description\",\"order\":0},{\"stationsSchema\":{\"stations\":[{\"exerciseSnapshot\":{\"title\":\"Push-up exercise title\",\"description\":\"Push-up exercise description\",\"complexity\":1},\"repetitions\":3,\"weight\":0,\"duration\":100,\"rest\":20,\"order\":1},{\"exerciseSnapshot\":{\"title\":\"Barbell squat exercise title\",\"description\":\"Barbell squat exercise description\",\"complexity\":2},\"repetitions\":3,\"weight\":0,\"duration\":100,\"rest\":20,\"order\":1},{\"exerciseSnapshot\":{\"title\":\"Pull-up exercise title\",\"description\":\"Pull-up exercise description\",\"complexity\":3},\"repetitions\":3,\"weight\":0,\"duration\":100,\"rest\":20,\"order\":1}]},\"title\":\"Endurance round title\",\"description\":\"Endurance round description\",\"order\":0}]}}";
    private static final String WORKOUT_PLAN_JSON =
            "{\"workoutPlanSnapshot\":{\"roundsSchema\":{\"roundSnapshots\":[{\"stationsSchema\":{\"stations\":[{\"exerciseSnapshot\":{\"title\":\"Push-up exercise title\",\"description\":\"Push-up exercise description\",\"complexity\":1},\"repetitions\":3,\"weight\":0,\"duration\":100,\"rest\":20,\"order\":1},{\"exerciseSnapshot\":{\"title\":\"Barbell squat exercise title\",\"description\":\"Barbell squat exercise description\",\"complexity\":2},\"repetitions\":3,\"weight\":0,\"duration\":100,\"rest\":20,\"order\":1},{\"exerciseSnapshot\":{\"title\":\"Pull-up exercise title\",\"description\":\"Pull-up exercise description\",\"complexity\":3},\"repetitions\":3,\"weight\":0,\"duration\":100,\"rest\":20,\"order\":1}]},\"title\":\"Warm up round title\",\"description\":\"Warm up round description\",\"order\":0},{\"stationsSchema\":{\"stations\":[{\"exerciseSnapshot\":{\"title\":\"Push-up exercise title\",\"description\":\"Push-up exercise description\",\"complexity\":1},\"repetitions\":3,\"weight\":0,\"duration\":100,\"rest\":20,\"order\":1},{\"exerciseSnapshot\":{\"title\":\"Barbell squat exercise title\",\"description\":\"Barbell squat exercise description\",\"complexity\":2},\"repetitions\":3,\"weight\":0,\"duration\":100,\"rest\":20,\"order\":1},{\"exerciseSnapshot\":{\"title\":\"Pull-up exercise title\",\"description\":\"Pull-up exercise description\",\"complexity\":3},\"repetitions\":3,\"weight\":0,\"duration\":100,\"rest\":20,\"order\":1}]},\"title\":\"Strength round title\",\"description\":\"Strength round description\",\"order\":0},{\"stationsSchema\":{\"stations\":[{\"exerciseSnapshot\":{\"title\":\"Push-up exercise title\",\"description\":\"Push-up exercise description\",\"complexity\":1},\"repetitions\":3,\"weight\":0,\"duration\":100,\"rest\":20,\"order\":1},{\"exerciseSnapshot\":{\"title\":\"Barbell squat exercise title\",\"description\":\"Barbell squat exercise description\",\"complexity\":2},\"repetitions\":3,\"weight\":0,\"duration\":100,\"rest\":20,\"order\":1},{\"exerciseSnapshot\":{\"title\":\"Pull-up exercise title\",\"description\":\"Pull-up exercise description\",\"complexity\":3},\"repetitions\":3,\"weight\":0,\"duration\":100,\"rest\":20,\"order\":1}]},\"title\":\"Endurance round title\",\"description\":\"Endurance round description\",\"order\":0}]},\"title\":\"Push-up plan title\",\"description\":\"Push-up plan description\"}}";

    @Test
    void testJsonFormat() throws JsonProcessingException {
        CustomJsonObjectMapper mapper = CustomJsonObjectMapper.instance();

        String workoutRoundSchemaJson = mapper.writeValueAsString(TestSnapshotStore.stationsSchema());
        Assertions.assertEquals(STATIONS_SCHEMA_JSON, workoutRoundSchemaJson);

        String workoutSchemaJson = mapper.writeValueAsString(TestSnapshotStore.roundsSchema());
        Assertions.assertEquals(ROUNDS_SCHEMA_JSON, workoutSchemaJson);

        String workoutPlanJson = mapper.writeValueAsString(TestSnapshotStore.planSnapshot());
        Assertions.assertEquals(WORKOUT_PLAN_JSON, workoutPlanJson);
    }
}