package ru.soft.data.config.converter;

import com.fasterxml.jackson.core.JsonProcessingException;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;
import ru.soft.common.testdata.snapshot.TestSnapshotStore;

class CustomJsonObjectMapperTest {

    private static final String WORKOUT_ROUND_SCHEMA_JSON =
            "{\"roundSchema\":{\"roundStations\":[{\"exercise\":{\"title\":\"Push-up exercise title\",\"description\":\"Push-up exercise description\",\"complexity\":1},\"repetitions\":3,\"weight\":0,\"duration\":100,\"rest\":20,\"order\":1},{\"exercise\":{\"title\":\"Barbell squat exercise title\",\"description\":\"Barbell squat exercise description\",\"complexity\":2},\"repetitions\":3,\"weight\":0,\"duration\":100,\"rest\":20,\"order\":1},{\"exercise\":{\"title\":\"Pull-up exercise title\",\"description\":\"Pull-up exercise description\",\"complexity\":3},\"repetitions\":3,\"weight\":0,\"duration\":100,\"rest\":20,\"order\":1}]}}";
    private static final String WORKOUT_SCHEMA_JSON =
            "{\"workoutSchema\":{\"rounds\":[{\"roundSchema\":{\"roundStations\":[{\"exercise\":{\"title\":\"Push-up exercise title\",\"description\":\"Push-up exercise description\",\"complexity\":1},\"repetitions\":3,\"weight\":0,\"duration\":100,\"rest\":20,\"order\":1},{\"exercise\":{\"title\":\"Barbell squat exercise title\",\"description\":\"Barbell squat exercise description\",\"complexity\":2},\"repetitions\":3,\"weight\":0,\"duration\":100,\"rest\":20,\"order\":1},{\"exercise\":{\"title\":\"Pull-up exercise title\",\"description\":\"Pull-up exercise description\",\"complexity\":3},\"repetitions\":3,\"weight\":0,\"duration\":100,\"rest\":20,\"order\":1}]},\"title\":\"Warm up round title\",\"description\":\"Warm up round description\"},{\"roundSchema\":{\"roundStations\":[{\"exercise\":{\"title\":\"Push-up exercise title\",\"description\":\"Push-up exercise description\",\"complexity\":1},\"repetitions\":3,\"weight\":0,\"duration\":100,\"rest\":20,\"order\":1},{\"exercise\":{\"title\":\"Barbell squat exercise title\",\"description\":\"Barbell squat exercise description\",\"complexity\":2},\"repetitions\":3,\"weight\":0,\"duration\":100,\"rest\":20,\"order\":1},{\"exercise\":{\"title\":\"Pull-up exercise title\",\"description\":\"Pull-up exercise description\",\"complexity\":3},\"repetitions\":3,\"weight\":0,\"duration\":100,\"rest\":20,\"order\":1}]},\"title\":\"Strength round title\",\"description\":\"Strength round description\"},{\"roundSchema\":{\"roundStations\":[{\"exercise\":{\"title\":\"Push-up exercise title\",\"description\":\"Push-up exercise description\",\"complexity\":1},\"repetitions\":3,\"weight\":0,\"duration\":100,\"rest\":20,\"order\":1},{\"exercise\":{\"title\":\"Barbell squat exercise title\",\"description\":\"Barbell squat exercise description\",\"complexity\":2},\"repetitions\":3,\"weight\":0,\"duration\":100,\"rest\":20,\"order\":1},{\"exercise\":{\"title\":\"Pull-up exercise title\",\"description\":\"Pull-up exercise description\",\"complexity\":3},\"repetitions\":3,\"weight\":0,\"duration\":100,\"rest\":20,\"order\":1}]},\"title\":\"Endurance round title\",\"description\":\"Endurance round description\"}]}}";
    private static final String WORKOUT_PLAN_JSON =
            "{\"workoutPlan\":{\"title\":\"Push-up plan title\",\"description\":\"Push-up plan description\",\"workoutSchema\":{\"rounds\":[{\"roundSchema\":{\"roundStations\":[{\"exercise\":{\"title\":\"Push-up exercise title\",\"description\":\"Push-up exercise description\",\"complexity\":1},\"repetitions\":3,\"weight\":0,\"duration\":100,\"rest\":20,\"order\":1},{\"exercise\":{\"title\":\"Barbell squat exercise title\",\"description\":\"Barbell squat exercise description\",\"complexity\":2},\"repetitions\":3,\"weight\":0,\"duration\":100,\"rest\":20,\"order\":1},{\"exercise\":{\"title\":\"Pull-up exercise title\",\"description\":\"Pull-up exercise description\",\"complexity\":3},\"repetitions\":3,\"weight\":0,\"duration\":100,\"rest\":20,\"order\":1}]},\"title\":\"Warm up round title\",\"description\":\"Warm up round description\"},{\"roundSchema\":{\"roundStations\":[{\"exercise\":{\"title\":\"Push-up exercise title\",\"description\":\"Push-up exercise description\",\"complexity\":1},\"repetitions\":3,\"weight\":0,\"duration\":100,\"rest\":20,\"order\":1},{\"exercise\":{\"title\":\"Barbell squat exercise title\",\"description\":\"Barbell squat exercise description\",\"complexity\":2},\"repetitions\":3,\"weight\":0,\"duration\":100,\"rest\":20,\"order\":1},{\"exercise\":{\"title\":\"Pull-up exercise title\",\"description\":\"Pull-up exercise description\",\"complexity\":3},\"repetitions\":3,\"weight\":0,\"duration\":100,\"rest\":20,\"order\":1}]},\"title\":\"Strength round title\",\"description\":\"Strength round description\"},{\"roundSchema\":{\"roundStations\":[{\"exercise\":{\"title\":\"Push-up exercise title\",\"description\":\"Push-up exercise description\",\"complexity\":1},\"repetitions\":3,\"weight\":0,\"duration\":100,\"rest\":20,\"order\":1},{\"exercise\":{\"title\":\"Barbell squat exercise title\",\"description\":\"Barbell squat exercise description\",\"complexity\":2},\"repetitions\":3,\"weight\":0,\"duration\":100,\"rest\":20,\"order\":1},{\"exercise\":{\"title\":\"Pull-up exercise title\",\"description\":\"Pull-up exercise description\",\"complexity\":3},\"repetitions\":3,\"weight\":0,\"duration\":100,\"rest\":20,\"order\":1}]},\"title\":\"Endurance round title\",\"description\":\"Endurance round description\"}]}}}";

    @Test
    void testJsonFormat() throws JsonProcessingException {
        CustomJsonObjectMapper mapper = CustomJsonObjectMapper.instance();

        String workoutRoundSchemaJson = mapper.writeValueAsString(TestSnapshotStore.workoutRoundSchemaSnapshot());
        Assertions.assertEquals(WORKOUT_ROUND_SCHEMA_JSON, workoutRoundSchemaJson);

        String workoutSchemaJson = mapper.writeValueAsString(TestSnapshotStore.workoutSchemaSnapshot());
        Assertions.assertEquals(WORKOUT_SCHEMA_JSON, workoutSchemaJson);

        String workoutPlanJson = mapper.writeValueAsString(TestSnapshotStore.workoutPlanSnapshot());
        Assertions.assertEquals(WORKOUT_PLAN_JSON, workoutPlanJson);
    }
}